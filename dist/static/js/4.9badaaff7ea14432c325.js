webpackJsonp([4],{UR89:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),s=a("exGp"),o=a.n(s),i=a("mtWM"),l=a.n(i),c=a("/5sW"),u=a("+uEZ");c.a.component("pie-chart",{extends:u.a.Pie,mixins:[u.a.mixins.reactiveProp],props:{chartData:{type:Object,required:!0}},data:function(){return{options:{legend:{display:!0},tooltips:{enabled:!0,mode:"single",callbacks:{label:function(e,t){return t.labels[e.index]+": "+t.datasets[e.datasetIndex].data[e.index]+"%"}}},responsive:!0,maintainAspectRatio:!1}}},mounted:function(){this.renderChart(this.chartData,this.options)}});var d={name:"great-powers-chart",data:function(){return{loaded:!1,chartData:{},selected:"2014",years:(e=1960,t=2014,Array(t-e+1).fill().map(function(t,a){return e+a}))};var e,t},mounted:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.getEmissions();case 1:case"end":return t.stop()}},t,e)}))()},methods:{getEmissions:function(){var e=this;this.chartData={labels:[],datasets:[{label:"Great powers' CO2 emissions",backgroundColor:["Green","Red","Blue","Yellow","Orange","Purple","Cyan","Brown"],data:[],hoverBackgroundColor:["Green","Red","Blue","Yellow","Orange","Purple","Cyan","Brown"]}]},this.loaded=!1;var t="http://localhost:5000/api/greatpowers/"+this.selected;l.a.get(t).then(function(t){var a=t.data;if(void 0!==a){for(var n=0;n<a.length;n++)e.chartData.labels.push(a[n][0]),e.chartData.datasets[0].data.push(a[n][1]);e.loaded=!0}}).catch(function(e){console.log(e)})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("h2",[e._v("Suurvallat")]),e._v(" "),e.loaded?a("pie-chart",{attrs:{"chart-data":e.chartData}}):e._e(),e._v(" "),a("br"),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selected=t.target.multiple?a:a[0]},function(t){return e.getEmissions()}]}},[a("option",{attrs:{disabled:"",value:""}},[e._v("Select year")]),e._v(" "),e._l(e.years,function(t){return a("option",[e._v("\n  "+e._s(t)+"\n  ")])})],2)],1)},staticRenderFns:[]},h=a("VU/8")(d,p,!1,null,null,null);t.default=h.exports}});
//# sourceMappingURL=4.9badaaff7ea14432c325.js.map